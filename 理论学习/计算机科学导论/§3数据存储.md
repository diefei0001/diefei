# 数据存储单位
> 计算机中最常用的存储单位是字节（B），一字节等于8位（b）
> kB，MB，GB，TB分别等于2的10，20，30，40次方个字节
# 数字存储
> 计算机中使用的数字,一般都是实数.实数又可以分为整数和非整数,整数通常称为定点数,非整数通常
称为浮点数
> 定点数用定点表示法表示，定点表示法有：无符号表示法、符号加绝对值表示法、二进制补码表示法
> 在计算机内，无符号整数用无符号表示法表示，有符号整数用补码表示法表示
- [无符号表示法由于不考虑符号位，直接将数字转为二进制即可]。常用于内存地址，颜色代码，文件大
小等不可能为负数的情况
- 补码表示法中，数字由`符号位`和`绝对值位`构成，[正数的符号位为0，负数的符号位为0]，剩余位数为绝
对值位[。正数的绝对值部分为原码，负数的绝对值部分的原码要取反+1].
> 计算机在面对过大的数时，会直接表示为NaN（Not a Number）
> 无穷在计算机中被表示为inf，inf有±，用来代表正负无穷
# 反码的本质
> 正数的反码与原码相同，负数的反码保持符号位不变，绝对值位取反
这个操作在数学上等价与：
![alt text](diefei\Markdown素材库\Markdown 素材\反码的本质.png)
例如，-5的8位反码为：255-5=250 **11111010**,也就是说：
> 对于负数 `-x`，其反码等于这个全1数减去x的绝对值

# 补码的本质
- 对于符号加绝对值表示法，因为双零的存在,因此原码无法之间通过二进制进行计算,加法不影响:
                          1+1 = 0001+0001=0010=2
- 但是减法出了问题
                          1+-1=0001+1001=1010=-2
- 由此,我们不仅感慨,如果这个世界上没有负数该多好.巧了,还真有这种情况：
- 在高等数学里,有一个东西叫`同余`：
- ![alt text](diefei\Markdown素材库\Markdown 素材\同余.png)
- 
- 假如现在的时间是12点整,你的手表走快了3小时,指向了3,那么你可以将指针逆时针倒退3小时,也可以顺时针提前9小时,最后结果都是指向12.意思就是说-3=9,即[在12这个模下,-3和9是等价值]的,这背后蕴含的数学原理就是同余.
- 我们已经知道对于一个n位数的位模式,当他表示正整数时,一共可以表示  $2^n$ 个数,那么对于任意一个负数x(＜0 ),我们都可以找到在 $2^n$这个模下的等价值,也就是说,我们可以把负数全部转换成正数.转换方法为:
>                              x 的最小同余数等于 2^n+x ,x<0
> 也就是说，一个负数的最小同余数等于这个负数加上2的n次方，n为位模式的位数
- 假如`n=3`,`3`的二进制数为`011`, `-3 `的最小同余数为`(2^3-3)=5`,`5`的二进制数为`101`,因此`-3`可以用`101`来表示,我们把这个码称为补码,[补码根源在于补模运算].然后我们再在前面加一位表示±,因`n=4`时,`3=0011`,`-3=1101`.当模变为2的4次方,-3的最小同余数为`13`,而`1101正好等于13`,所以这是合法的.
> 补码表示法的本质就是通过同余，将负数映射到正数范围，然后全部用原码表示法表示。这样一来，减法就全部转为了加法
> 正数的补码，反码都等于原码，负数的反码+1等于补码，补码的补码等于原码
- 反码等于`2^n-1+x（x<0）`，补码等于`2^n+x(x<0)`
> 二进制补码范围的左端点的补码是被定义的，其没有原码和反码
- 例如8位的范围是-128到127，-128的补码为10000000。其他位数也是类似，例如：7位的范围是-64到63，-64的补码为1000000.

# IEEE 754浮点数标准表示法
> 二进制数的规范化
- 初中时,我们都学习过科学计数法，对于实数166.789可以表示为:
                                ` +1.66789×10^2 `
- 对于实数0.166789可以表示为:
                                `+1.66789×10^{-1}`
- 我们可以将1.66789称为`定点数`,将2称为`位移量`,+称为`符号`.
- 之所以叫做位移量,是因为相较于166.789来说,小数点向左移动了2位, 1667.89变成166.789,他们的定点数是不变的,都是1.66789,小数点一定是固定在1后面,改变的只有位移量而已,因此称1.66789为定点数.根据初中知识,在科学计数法中,小数点左边的数一定要在1-10之间,这个称为科学计数法的**`规范化`**
- 对于计算机来说,数字只有0或1,因此[二进制数字转换成浮点数,小数点左边的数一定要是1],因为对于二进制来说,首位的0是可以省去的,例如:
- ![alt text](diefei\Markdown素材库\Markdown 素材\二进制规范化.png)
> 规范化后的标准格式为：
![alt text](diefei\Markdown素材库\Markdown 素材\规范化格式.png)
> 规范化二进制数的小数部分被称为尾数
- 比如：1.0101 x 2^4 中，0101就是尾数
> 偏置与余码
` 偏置（bias）`是一个固定的数值，它[将指数值的范围平移，使得所有的指数值都变成非负数]。通过偏置得到的数字，称为[余码]
> 阶码 是指数E+bias的得到的数值
> 浮点数的指数部分不会直接存储负数，而是存储的是加上偏置值后的结果，这样就可以用无符号表示法存储指数
> - 为什么单精度的bias是127？
    - 单精度用8位位模式存储指数，实际可以存储的指数范围为1到254，也就是说，bias需要确保指数加上它不会超出这个范围，太大与太小的偏置值会导致范围受限。例如：bias如果为200，那么E不能大于54；如果为50，则E不能小于-49，127是比较理想的中间值。双精度的1023也是同样的道理。
> IEEE754浮点数存储格式:
- IEEE 754 浮点数表示法按固定结构存储浮点数：
>                           符号位（S）  + 阶码 + 尾数（M）
- 单精度标准下，[符号位为1位（0/1）,尾数为23位，阶码为8位]无符号整数
- 双精度标准下，[符号位位1位（0/1）,尾数为52位，阶码为11位]无符号整数

# 浮点数的精度问题
> IEEE754 通过截断和四舍五入平衡浮点数的精度
- 将十进制小数转为二进制小数会出现除不尽或是小数部分位数过长的问题，IEEE 754标准在面对这个问题采取的方法是`截断`和`四舍五入`，假设一个二进制小数的尾数超过了23位（单精度标准），那么只会保留23位，视后续的位数决定是否加1，了解即可，无需深究
> IEEE754 的浮点数精确位数有限
- 单精度：约 `6-9` 位有效十进制数字。
- 双精度：约 `15-17` 位有效十进制数字
- 这也就意味着，对于计算机来说，会出现0.1+0.2不等于0.3的情况

# IEEE754 的特殊值
> 0的阶码，尾数全为0，符号可正可负，也就是说，IEE754 存在双0问题
> 阶码全1 尾数全0，用于表示无穷，正零和正无穷的符号为0；负零和负无穷的符号为1

# e计数法
- e计数法是只保留指数的一种科学计数法
- 例如： 2x10^3 可以写成2e3

# 范围和溢出
> 定点数的范围
- 任意的数字表示法都存在范围的问题，[超出表示法可以表示的范围称为溢出]。
- 无符号表示法中，位模式的每一位都可以用于表示数值，因此其范围就是可重复组合问题，每[一位有2个选择（0/1），则对于n位位模式，一共有2的n次方种可能，表示0用掉一种，因此一共能表示2的n次方-1个数字]
- 符号加绝对值表示法由于[一个数码被用作符号位，因此正数和负数各有有2的n-1种可能，由于双零的存在，因此各自减一。]
- 补码中，一共有n位的位模式,由于有一位拿来表示正负,因此最小同余数实际等于` 2^(n-1)+x`,最小同余数为非负数,所以`2^(n-1)+x≥0`,所以`x≥-2^(n-1)`, 因此二进制补码表示法能够表示的负数范围为`[-2^(n-1) , 2^(n-1)-1]`
![alt text](diefei\Markdown素材库\Markdown 素材\定点数范围.png)
> 浮点数的范围
- 规范化浮点数的通用格式是：
`符号×1.M×b的e次方`
以单精度为例子，1.M的取值范围为[1,2），指数的范围为[-126,127)，b=2.那么单精度浮点数的范围为：
![alt text](diefei\Markdown素材库\Markdown 素材\浮点数范围.png)
- 我们会发现，红色区域是无法表示的
为了解决这个问题，我们把红色范围的数（不包括0）全部视为**`非规范化数`**
> 非规范化数的指数固定为-126（无bias），不再前隐1(因为强调其范围在-1和1之间)
> 非规范化浮点数的通用格式为：`符号×0.Mx2的-126次方`

> 特殊值的溢出问题

# 溢出计算问题
- 对于一个8位的位模式，其范围为0-255（无符号），因此256=0，257=1，258=2
- 对于一个8位的位模式，其范围为-128-127（补码），因此128=-128，129=-127，130=-126
- 因此不难发现规律，设数字为x，左端点数字为e1，右端点为e2，则[实际溢出后的数字为]
>                当x上溢     x+e1-e2
>                当x下溢     x+e2-e1

# 文本存储与输入输出
> ASCII和Unicode是世界上主流的两种编码系统，其核心思想是建立字符与数字之间的映射关系
- 其中，ASCII采用[7位无符号数定义字符集，一共可以表示127个字符]。[涵盖了常用的英文字符（大写字母，小写字母）以及控制字符]
- ASCII的字符按顺序排列，且[小写字符比大写字符大32]，即A是65，B是66，C是67，a是（65+32）=97
- Unicode用[32位无符号数定义字符集，由于可表示数值太大，分为17个平面，且用十六进制表示。涵盖了世界上几乎所有语言的符号，与emoji等]
> ASCII码为8位定长编码，最高位保持为0
> Unicode 根据编码点所在的平面，使用不同长度的变长编码。如UTF-8采用1-4个字节来编码,UTF-16采用2或4个字节，
- [西文在UTF-8常用1个字节，这是为了兼容ASCII，而中文则常用3个字节，在UTF-16中，西文和中文都采用两个字节。]

> GB2312-80是我国汉字的初代规范编码，现已更新至GB 18030
- 在GB2312中，区位码为[1-94的二维数组。其加32后得到国标码，国标码是双字节低7位2进制数。加128后得到机内码]
> 汉字的常用输入方式有拼音码和字形编码，手写输入等
> 汉字的常用输出方式为点阵和矢量
- 使用点阵法时，一个axa的点阵要占用2a个字节，点阵越大，占用字节越多，汉字也越清晰

# 音频的存储和合成
波形音频的存储经过：
  - > 采样：用固定的频率记录连续的声音信号
  - > 量化：将连续的声音信号转换为离散的最接近的整数数字信号
  - > 编码：将数字信号用无符号表示法按一定位深度表示
  - > 转换：将二进制数字转换为特定音频结构：flac，mp3，wav,等
MIDI音频的存储
- MIDI存储音乐信息的一系列指令，如[乐谱，MIDI消息和数据]，与占用较大的波形文件相比，MIDI占用空间更小。

# 图像的存储：
图像的存储经过：
 - > 采样：将图像分割成像素
 - > 量化：将像素按24位RGB颜色模式量化成二进制数值
 - > 编码：将二进制转为特定的图像结构：jpg，jepg，gif等
> 矢量图用数学模型对物体进行描述
> 真彩色和256色
- 256色颜色格式中，[一个像素有256种颜色选，那么一个像素占8个bit]，也就是一个字节。真彩色（rgb）颜色格式中，[一个像素至少是24位，也就是三个字节，那么一共有2的24次方种颜色选]。
- 将真彩色换为256色是常见的数据压缩手段
>图像数据量的计算公式
                       `图像数据量=宽x高x图像颜色位深度/8`

